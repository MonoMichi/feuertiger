# Migration `20201228154551-98e48b2`

This migration has been generated by michael.thanei at 12/28/2020, 3:45:51 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "MembershipRequest" (
    "id" TEXT NOT NULL,
    "userId" TEXT NOT NULL,
    "departmentId" TEXT NOT NULL,

    PRIMARY KEY ("id")
)

CREATE TABLE "MembershipInvite" (
    "id" TEXT NOT NULL,
    "email" TEXT NOT NULL,
    "departmentId" TEXT NOT NULL,

    PRIMARY KEY ("id")
)

ALTER TABLE "MembershipRequest" ADD FOREIGN KEY("userId")REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "MembershipRequest" ADD FOREIGN KEY("departmentId")REFERENCES "Department"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "MembershipInvite" ADD FOREIGN KEY("departmentId")REFERENCES "Department"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201126213144-121c83f..20201228154551-98e48b2
--- datamodel.dml
+++ datamodel.dml
@@ -1,6 +1,6 @@
 datasource postgresql {
-  url = "***"
+  url = "***"
   provider = "postgresql"
 }
 generator client {
@@ -92,11 +92,13 @@
   ADMIN
 }
 model Department {
-  id          String                 @id
-  name        String
-  memberships DepartmentMembership[] @relation("Department_DepartmentMembership")
+  id                String                 @id
+  name              String
+  memberships       DepartmentMembership[] @relation("Department_DepartmentMembership")
+  MembershipRequest MembershipRequest[]
+  MembershipInvite  MembershipInvite[]
 }
 model DepartmentMembership {
   id            String               @id
@@ -120,5 +122,21 @@
   personId              String?
   person                Person?                @relation(fields: [personId], references: [id])
   departmentMemberships DepartmentMembership[] @relation("User_DepartmentMembership")
   userRoles             UserRole[]
+  MembershipRequest     MembershipRequest[]
 }
+
+model MembershipRequest {
+  id           String     @id
+  userId       String
+  user         User       @relation(fields: [userId], references: [id])
+  departmentId String
+  department   Department @relation(fields: [departmentId], references: [id])
+}
+
+model MembershipInvite {
+  id           String     @id
+  email        String
+  departmentId String
+  department   Department @relation(fields: [departmentId], references: [id])
+}
```


